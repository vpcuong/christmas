<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Animation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 50%, #0f2818 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            display: block;
            background: transparent;
        }

        .greeting-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }

        .greeting-text {
            font-size: 3.5rem;
            font-weight: bold;
            color: #ff6b6b;
            text-shadow: 
                0 0 10px rgba(255, 107, 107, 0.8),
                0 0 20px rgba(255, 107, 107, 0.6),
                2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 20px;
            animation: pulse 1.5s ease-in-out infinite;
            letter-spacing: 2px;
        }

        .custom-name {
            color: #ffd700;
            text-shadow: 
                0 0 10px rgba(255, 215, 0, 0.8),
                0 0 20px rgba(255, 215, 0, 0.6),
                2px 2px 4px rgba(0, 0, 0, 0.8);
            font-style: italic;
            font-weight: 900;
        }

        .subtitle {
            font-size: 1.8rem;
            color: #ffffff;
            text-shadow: 
                0 0 10px rgba(255, 255, 255, 0.8),
                2px 2px 4px rgba(0, 0, 0, 0.8);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.9;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes twinkle {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }
    </style>
</head>
<body>
    <canvas id="christmasCanvas"></canvas>
    
    <div class="greeting-container">
        <div class="greeting-text">
            ðŸŽ„ Merry Christmas<span id="nameDisplay" class="custom-name"></span>! ðŸŽ„
        </div>
        <div class="subtitle">âœ¨ Wishing you joy and happiness âœ¨</div>
    </div>

    <script>
        const canvas = document.getElementById('christmasCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Get custom name from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const customName = urlParams.get('customName');
        
        if (customName) {
            document.getElementById('nameDisplay').textContent = `, ${customName}`;
        } else {
            document.getElementById('nameDisplay').textContent = '';
        }

        // Particle system for snow and decorative effects
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedY = Math.random() * 3 + 2;
                this.speedX = Math.random() * 2 - 1;
                this.opacity = Math.random() * 0.5 + 0.5;
                this.type = Math.random() > 0.8 ? 'sparkle' : 'snow';
            }

            update() {
                this.y += this.speedY;
                this.x += this.speedX;
                
                // Wrap around screen
                if (this.y > canvas.height) {
                    this.y = -10;
                    this.x = Math.random() * canvas.width;
                }
                
                if (this.x > canvas.width) {
                    this.x = 0;
                } else if (this.x < 0) {
                    this.x = canvas.width;
                }
            }

            draw() {
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                
                if (this.type === 'sparkle') {
                    // Draw sparkle/star
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Add glow effect
                    ctx.fillStyle = `rgba(255, 255, 200, ${this.opacity * 0.5})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    // Draw snowflake
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // Create particles
        const particles = [];
        const particleCount = 150;
        
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }

        // Draw ornaments and decorations
        function drawOrnament(x, y, radius, color) {
            // Main sphere
            const gradient = ctx.createRadialGradient(x - radius/3, y - radius/3, 0, x, y, radius);
            gradient.addColorStop(0, '#ffffff');
            gradient.addColorStop(0.5, color);
            gradient.addColorStop(1, '#000000');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Highlight
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            ctx.beginPath();
            ctx.arc(x - radius/4, y - radius/4, radius/3, 0, Math.PI * 2);
            ctx.fill();
            
            // Top cap
            ctx.fillStyle = '#d4af37';
            ctx.beginPath();
            ctx.arc(x, y - radius - 5, radius/4, 0, Math.PI * 2);
            ctx.fill();
        }

        // Draw stars
        function drawStar(x, y, size, color) {
            ctx.save();
            ctx.translate(x, y);
            ctx.fillStyle = color;
            
            ctx.beginPath();
            for (let i = 0; i < 5; i++) {
                const angle = (i * 4 * Math.PI) / 5 - Math.PI / 2;
                const px = Math.cos(angle) * size;
                const py = Math.sin(angle) * size;
                
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
                
                const innerAngle = angle + (2 * Math.PI) / 10;
                const innerX = Math.cos(innerAngle) * (size / 2);
                const innerY = Math.sin(innerAngle) * (size / 2);
                ctx.lineTo(innerX, innerY);
            }
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // Animation loop
        let animationTime = 0;
        
        function animate() {
            // Clear canvas with semi-transparent background for trailing effect
            ctx.fillStyle = 'rgba(26, 71, 42, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw particles
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
            }

            // Draw decorative ornaments in the background
            const ornamentPositions = [
                { x: canvas.width * 0.2, y: canvas.height * 0.2, size: 30, color: '#ff0000' },
                { x: canvas.width * 0.8, y: canvas.height * 0.3, size: 25, color: '#00ff00' },
                { x: canvas.width * 0.15, y: canvas.height * 0.7, size: 35, color: '#0066ff' },
                { x: canvas.width * 0.85, y: canvas.height * 0.75, size: 28, color: '#ff00ff' },
                { x: canvas.width * 0.5, y: canvas.height * 0.1, size: 32, color: '#ffff00' },
            ];

            ornamentPositions.forEach(pos => {
                ctx.globalAlpha = 0.3 + 0.2 * Math.sin(animationTime * 0.02 + pos.x);
                drawOrnament(pos.x, pos.y, pos.size, pos.color);
            });

            // Draw stars
            ctx.globalAlpha = 0.5 + 0.3 * Math.sin(animationTime * 0.015);
            drawStar(canvas.width * 0.5, canvas.height * 0.15, 40, '#ffd700');
            
            ctx.globalAlpha = 0.3 + 0.2 * Math.sin(animationTime * 0.02);
            drawStar(canvas.width * 0.1, canvas.height * 0.35, 20, '#ffff00');
            drawStar(canvas.width * 0.9, canvas.height * 0.55, 18, '#ffff00');

            ctx.globalAlpha = 1;

            animationTime++;
            requestAnimationFrame(animate);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Start animation
        animate();
    </script>
</body>
</html>